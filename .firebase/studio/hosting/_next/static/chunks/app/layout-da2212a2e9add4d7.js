(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3311:function(e,t,r){Promise.resolve().then(r.t.bind(r,3054,23)),Promise.resolve().then(r.bind(r,3694)),Promise.resolve().then(r.bind(r,771)),Promise.resolve().then(r.bind(r,4735)),Promise.resolve().then(r.bind(r,6208))},3694:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var n=r(7437);r(2265);var s=r(6463),a=r(8087);function o(){return(0,n.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-background",children:(0,n.jsx)(a.Z,{className:"h-16 w-16 animate-spin text-primary"})})}var i=r(4735);function u(e){let{children:t}=e,{userRole:r,isLoading:a}=(0,i.j)(),u=(0,s.usePathname)(),d=(0,s.useRouter)();if(a)return(0,n.jsx)(o,{});if(!r)return"/"===u||"/signup"===u?(0,n.jsx)(n.Fragment,{children:t}):(d.push("/"),(0,n.jsx)(o,{}));let c=u.startsWith("/admin"),l=u.startsWith("/app");return"admin"!==r||c?"user"!==r||l?(0,n.jsx)(n.Fragment,{children:t}):(d.push("/app/parking"),(0,n.jsx)(o,{})):(d.push("/admin/parking"),(0,n.jsx)(o,{}))}},771:function(e,t,r){"use strict";r.d(t,{Toaster:function(){return x}});var n=r(7437),s=r(6763),a=r(2265),o=r(4504),i=r(3027),u=r(4732),d=r(9354);let c=o.zt,l=a.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.l_,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...s})});l.displayName=o.l_.displayName;let f=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),p=a.forwardRef((e,t)=>{let{className:r,variant:s,...a}=e;return(0,n.jsx)(o.fC,{ref:t,className:(0,d.cn)(f({variant:s}),r),...a})});p.displayName=o.fC.displayName,a.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.aU,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...s})}).displayName=o.aU.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.x8,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...s,children:(0,n.jsx)(u.Z,{className:"h-4 w-4"})})});m.displayName=o.x8.displayName;let v=a.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.Dx,{ref:t,className:(0,d.cn)("text-sm font-semibold",r),...s})});v.displayName=o.Dx.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.dk,{ref:t,className:(0,d.cn)("text-sm opacity-90",r),...s})});function x(){let{toasts:e}=(0,s.pm)();return(0,n.jsxs)(c,{children:[e.map(function(e){let{id:t,title:r,description:s,action:a,...o}=e;return(0,n.jsxs)(p,{...o,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[r&&(0,n.jsx)(v,{children:r}),s&&(0,n.jsx)(h,{children:s})]}),a,(0,n.jsx)(m,{})]},t)}),(0,n.jsx)(l,{})]})}h.displayName=o.dk.displayName},4735:function(e,t,r){"use strict";r.d(t,{UserRoleProvider:function(){return u},j:function(){return d}});var n=r(7437),s=r(2265),a=r(2960),o=r(516);let i=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,s.useState)(null),{user:d,loading:c}=(0,a.aF)(),l=(0,a.Wz)(),[f,p]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(c){p(!0);return}if(d&&l){let e=(0,o.iH)(l,"users/".concat(d.uid,"/role")),t=(0,o.jM)(e,e=>{u(e.val()||"user"),p(!1)},e=>{console.error("Error fetching user role from RTDB:",e),u("user"),p(!1)});return()=>t()}u(null),p(!1)},[d,c,l]),(0,n.jsx)(i.Provider,{value:{userRole:r,isLoading:f},children:t})}function d(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useUserRole must be used within a UserRoleProvider");return e}},6208:function(e,t,r){"use strict";r.d(t,{FirebaseClientProvider:function(){return u}});var n=r(7437),s=r(2960),a=r(7682),o=r(2265),i=r(5236);function u(e){let{children:t}=e,{firebaseApp:r,auth:u,database:d}=(0,s.mw)();return(0,o.useEffect)(()=>{try{console.info("[FIREBASE CFG]",(0,i.Mq)().options)}catch(e){}},[]),(0,n.jsx)(a.Km,{firebaseApp:r,auth:u,database:d,children:t})}},2960:function(e,t,r){"use strict";let n,s,a;r.d(t,{mw:function(){return m},aC:function(){return d.aC},Wz:function(){return d.Wz},Hx:function(){return f},aF:function(){return l}});var o=r(5236),i=r(5735),u=r(516),d=r(7682),c=r(2265);function l(){let e=(0,d.aC)(),[t,r]=(0,c.useState)(null),[n,s]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{if(!e){s(!1);return}let t=(0,i.Aj)(e,e=>{r(e),s(!1)});return()=>t()},[e]),{user:t,loading:n}}function f(e){let t=(0,d.Wz)(),[r,n]=(0,c.useState)(null),[s,a]=(0,c.useState)(!0),[o,i]=(0,c.useState)(null),l=(0,c.useRef)(e);return(0,c.useEffect)(()=>{if(!t){a(!1);return}l.current!==e&&(a(!0),n(null),i(null),l.current=e);let r=(0,u.iH)(t,e),s=(0,u.jM)(r,e=>{n(e.val()),a(!1)},t=>{console.error("Error fetching RTDB value for path: ".concat(e),t),i(t),a(!1)});return()=>(0,u.S1)(r,"value",s)},[t,e]),{data:r,loading:s,error:o}}r(6208);let p={apiKey:"AIzaSyDuPtIJt8OI8_P1HI0c2lNAaU5NVnNLeIQ",authDomain:"studio-4441386650-8a8cf.firebaseapp.com",databaseURL:"https://studio-4441386650-8a8cf-default-rtdb.firebaseio.com",projectId:"studio-4441386650-8a8cf",storageBucket:"studio-4441386650-8a8cf.appspot.com",appId:"1:543374686399:web:ca8ca41abe3529bcfc6e0a"};if(!p.apiKey)throw Error("FIREBASE apiKey est\xe1 vac\xeda o no se ha configurado.");function m(){return n=0===(0,o.C6)().length?(0,o.ZF)(p):(0,o.Mq)(),s=(0,i.v0)(n),a=(0,u.N8)(n),{firebaseApp:n,auth:s,database:a}}},7682:function(e,t,r){"use strict";r.d(t,{Km:function(){return o},Wz:function(){return d},aC:function(){return u}});var n=r(7437),s=r(2265);let a=(0,s.createContext)(null),o=e=>{let{children:t,firebaseApp:r,auth:s,database:o}=e;return(0,n.jsx)(a.Provider,{value:{firebaseApp:r,auth:s,database:o},children:t})},i=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider");return e},u=()=>{var e;return null===(e=i())||void 0===e?void 0:e.auth},d=()=>{var e;return null===(e=i())||void 0===e?void 0:e.database}},6763:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let s=0,a=new Map,o=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},u=[],d={toasts:[]};function c(e){d=i(d,e),u.forEach(e=>{e(d)})}function l(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(u.push(t),()=>{let e=u.indexOf(t);e>-1&&u.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9354:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(4839),s=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},3054:function(){}},function(e){e.O(0,[141,481,139,900,37,560,129,971,23,744],function(){return e(e.s=3311)}),_N_E=e.O()}]);