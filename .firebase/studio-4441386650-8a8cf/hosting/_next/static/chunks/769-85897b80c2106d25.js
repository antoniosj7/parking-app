"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{9021:function(e,t,r){r.d(t,{T:function(){return i}});var n=r(7437),a=r(9354),s=r(9217);function i(e){let{className:t}=e;return(0,n.jsx)(s.Z,{className:(0,a.cn)("h-12 w-12 text-primary",t)})}},5769:function(e,t,r){r.d(t,{Z:function(){return M}});var n=r(7437),a=r(7138),s=r(6463),i=r(5735),o=r(2960),d=r(6763),l=r(9354),c=r(3248),u=r(1541),f=r(1035),p=r(1321),m=r(3683),h=r(3274),x=r(9489),v=r(6045),g=r(530),y=r(7640),j=r(1601),b=r(4924),w=r(9733),N=r(2265),z=r(364);let S=z.zt,E=z.fC,A=z.xz,C=N.forwardRef((e,t)=>{let{className:r,sideOffset:a=4,...s}=e;return(0,n.jsx)(z.VY,{ref:t,sideOffset:a,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})});C.displayName=z.VY.displayName;var T=r(9021),k=r(4458);let I=N.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(k.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});I.displayName=k.fC.displayName,N.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(k.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",r),...a})}).displayName=k.Ee.displayName;let _=N.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(k.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});_.displayName=k.NY.displayName;let Z=e=>{let{href:t,icon:r,text:s,isCollapsed:i,pathname:o}=e,d=o.startsWith(t),c=(0,n.jsxs)(a.default,{href:t,className:(0,l.cn)("flex items-center gap-4 rounded-lg text-sm font-medium transition-all duration-200","group",d?"bg-primary/10 text-primary shadow-inner_sm ring-1 ring-primary/20":"text-muted-foreground hover:bg-muted/50 hover:text-foreground",i?"justify-center px-2 py-3":"px-4 py-3"),children:[(0,n.jsx)("div",{className:(0,l.cn)("transition-transform group-hover:scale-110",d?"text-primary":""),children:r}),(0,n.jsx)("span",{className:(0,l.cn)("whitespace-nowrap transition-all duration-200",i?"sr-only":"delay-100"),children:s})]});return i?(0,n.jsx)(S,{delayDuration:100,children:(0,n.jsxs)(E,{children:[(0,n.jsx)(A,{asChild:!0,children:c}),(0,n.jsx)(C,{side:"right",children:(0,n.jsx)("p",{children:s})})]})}):c},D=[{href:"/admin/parking",icon:(0,n.jsx)(c.Z,{size:20}),text:"Parqueo"},{href:"/admin/billing",icon:(0,n.jsx)(u.Z,{size:20}),text:"Cobros y Tarifas"},{href:"/admin/user-management",icon:(0,n.jsx)(f.Z,{size:20}),text:"Usuarios"},{href:"/admin/stats",icon:(0,n.jsx)(p.Z,{size:20}),text:"Estad\xedsticas"},{href:"/admin/settings",icon:(0,n.jsx)(m.Z,{size:20}),text:"Ajustes"}],O=[{href:"/app/parking",icon:(0,n.jsx)(h.Z,{size:20}),text:"Ver Parqueo"},{href:"/app/session",icon:(0,n.jsx)(x.Z,{size:20}),text:"Mi Sesi\xf3n"},{href:"/app/history",icon:(0,n.jsx)(v.Z,{size:20}),text:"Mi Historial"},{href:"/app/profile",icon:(0,n.jsx)(g.Z,{size:20}),text:"Mi Perfil"}];function M(e){let{isCollapsed:t,toggleCollapse:r,role:c}=e,{user:u}=(0,o.aF)(),f=(0,o.aC)(),p=(0,s.useRouter)(),m=(0,s.usePathname)(),{toast:h}=(0,d.pm)(),x=(null==u?void 0:u.displayName)?u.displayName.charAt(0).toUpperCase():(null==u?void 0:u.email)?u.email.charAt(0).toUpperCase():"U",v=async()=>{try{f&&await (0,i.w7)(f),h({title:"Sesi\xf3n cerrada",description:"Has cerrado sesi\xf3n correctamente."}),p.push("/")}catch(e){h({variant:"destructive",title:"Error",description:"No se pudo cerrar la sesi\xf3n. Int\xe9ntalo de nuevo."})}};return(0,n.jsxs)("aside",{className:(0,l.cn)("flex h-screen flex-col border-r bg-card transition-all duration-300 ease-in-out z-20 sticky top-0",t?"w-20":"w-64"),children:[(0,n.jsxs)("div",{className:(0,l.cn)("flex items-center border-b h-16 shrink-0",t?"justify-center px-2":"justify-between px-4"),children:[(0,n.jsxs)(a.default,{href:"admin"===c?"/admin/parking":"/app/parking",className:(0,l.cn)("flex items-center gap-2 overflow-hidden",t?"justify-center":""),children:[(0,n.jsx)(T.T,{className:"h-8 w-8 text-primary"}),(0,n.jsx)("span",{className:(0,l.cn)("font-bold text-lg font-headline whitespace-nowrap transition-opacity",t?"sr-only":"delay-100"),children:"admin"===c?"Panel Admin":"PUMG"})]}),(0,n.jsx)("button",{onClick:r,className:(0,l.cn)("hidden md:flex items-center justify-center p-1 rounded-full text-muted-foreground hover:bg-muted transition-colors",t?"opacity-0 pointer-events-none":""),children:(0,n.jsx)(y.Z,{size:20})})]}),(0,n.jsx)("div",{className:(0,l.cn)("absolute top-[68px] hidden md:block transition-all duration-300 ease-in-out z-30",t?"left-[68px]":"left-60"),children:(0,n.jsx)(S,{delayDuration:100,children:(0,n.jsxs)(E,{children:[(0,n.jsx)(A,{asChild:!0,children:(0,n.jsx)(w.z,{variant:"outline",size:"icon",className:"rounded-full h-8 w-8 bg-card/80 backdrop-blur-sm",onClick:r,children:t?(0,n.jsx)(j.Z,{size:16}):(0,n.jsx)(y.Z,{size:16})})}),(0,n.jsx)(C,{side:"right",children:(0,n.jsx)("p",{children:t?"Expandir":"Colapsar"})})]})})}),(0,n.jsx)("nav",{className:"flex-1 space-y-2 p-3 mt-4 overflow-y-auto",children:(0,n.jsx)("div",{className:"space-y-1",children:("admin"===c?D:O).map(e=>(0,n.jsx)(Z,{...e,isCollapsed:t,pathname:m},e.href))})}),(0,n.jsx)("div",{className:"mt-auto border-t p-3",children:(0,n.jsxs)("div",{className:(0,l.cn)("flex items-center gap-3",t?"justify-center":""),children:[(0,n.jsx)(I,{className:"h-9 w-9",children:(0,n.jsx)(_,{className:"bg-primary/20 text-primary font-semibold",children:x})}),(0,n.jsxs)("div",{className:(0,l.cn)("flex flex-col overflow-hidden",t?"sr-only":""),children:[(0,n.jsx)("span",{className:"text-sm font-medium truncate",children:"admin"===c?"Administrador":(null==u?void 0:u.displayName)||"Usuario"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:null==u?void 0:u.email})]}),(0,n.jsx)(S,{delayDuration:100,children:(0,n.jsxs)(E,{children:[(0,n.jsx)(A,{asChild:!0,children:(0,n.jsx)(w.z,{variant:"ghost",size:"icon",className:(0,l.cn)("rounded-lg",t?"":"ml-auto"),onClick:v,children:(0,n.jsx)(b.Z,{size:20})})}),(0,n.jsx)(C,{side:"right",children:(0,n.jsx)("p",{children:"Cerrar Sesi\xf3n"})})]})})]})})]})}},9733:function(e,t,r){r.d(t,{z:function(){return l}});var n=r(7437),a=r(2265),s=r(3355),i=r(3027),o=r(9354);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-150 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transform hover:-translate-y-px active:translate-y-0.5 active:shadow-inner_sm [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-md hover:shadow-lg",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:l=!1,...c}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(d({variant:a,size:i,className:r})),ref:t,...c})});l.displayName="Button"},6208:function(e,t,r){r.d(t,{FirebaseClientProvider:function(){return d}});var n=r(7437),a=r(2960),s=r(7682),i=r(2265),o=r(5236);function d(e){let{children:t}=e,{firebaseApp:r,auth:d,database:l}=(0,a.mw)();return(0,i.useEffect)(()=>{try{console.info("[FIREBASE CFG]",(0,o.Mq)().options)}catch(e){}},[]),(0,n.jsx)(s.Km,{firebaseApp:r,auth:d,database:l,children:t})}},2960:function(e,t,r){let n,a,s;r.d(t,{mw:function(){return m},aC:function(){return l.aC},Wz:function(){return l.Wz},Hx:function(){return f},aF:function(){return u}});var i=r(5236),o=r(5735),d=r(516),l=r(7682),c=r(2265);function u(){let e=(0,l.aC)(),[t,r]=(0,c.useState)(null),[n,a]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{if(!e){a(!1);return}let t=(0,o.Aj)(e,e=>{r(e),a(!1)});return()=>t()},[e]),{user:t,loading:n}}function f(e){let t=(0,l.Wz)(),[r,n]=(0,c.useState)(null),[a,s]=(0,c.useState)(!0),[i,o]=(0,c.useState)(null),u=(0,c.useRef)(e);return(0,c.useEffect)(()=>{if(!t){s(!1);return}u.current!==e&&(s(!0),n(null),o(null),u.current=e);let r=(0,d.iH)(t,e),a=(0,d.jM)(r,e=>{n(e.val()),s(!1)},t=>{console.error("Error fetching RTDB value for path: ".concat(e),t),o(t),s(!1)});return()=>(0,d.S1)(r,"value",a)},[t,e]),{data:r,loading:a,error:i}}r(6208);let p={apiKey:"AIzaSyDuPtIJt8OI8_P1HI0c2lNAaU5NVnNLeIQ",authDomain:"studio-4441386650-8a8cf.firebaseapp.com",databaseURL:"https://studio-4441386650-8a8cf-default-rtdb.firebaseio.com",projectId:"studio-4441386650-8a8cf",storageBucket:"studio-4441386650-8a8cf.appspot.com",appId:"1:543374686399:web:ca8ca41abe3529bcfc6e0a"};if(!p.apiKey)throw Error("FIREBASE apiKey est\xe1 vac\xeda o no se ha configurado.");function m(){return n=0===(0,i.C6)().length?(0,i.ZF)(p):(0,i.Mq)(),a=(0,o.v0)(n),s=(0,d.N8)(n),{firebaseApp:n,auth:a,database:s}}},7682:function(e,t,r){r.d(t,{Km:function(){return i},Wz:function(){return l},aC:function(){return d}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(null),i=e=>{let{children:t,firebaseApp:r,auth:a,database:i}=e;return(0,n.jsx)(s.Provider,{value:{firebaseApp:r,auth:a,database:i},children:t})},o=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider");return e},d=()=>{var e;return null===(e=o())||void 0===e?void 0:e.auth},l=()=>{var e;return null===(e=o())||void 0===e?void 0:e.database}},6763:function(e,t,r){r.d(t,{pm:function(){return f}});var n=r(2265);let a=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9354:function(e,t,r){r.d(t,{cn:function(){return s}});var n=r(4839),a=r(6164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}}]);